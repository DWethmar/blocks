{"id":"wzdj","dependencies":[{"name":"/home/dwethmar/Projects/blocks/web/tsconfig.json","includedInParent":true,"mtime":1558787104633},{"name":"/home/dwethmar/Projects/blocks/web/.babelrc","includedInParent":true,"mtime":1558107217825},{"name":"/home/dwethmar/Projects/blocks/web/package.json","includedInParent":true,"mtime":1558785188756},{"name":"ammo.js","loc":{"line":4,"column":19},"parent":"/home/dwethmar/Projects/blocks/web/app/physics/physics.ts","resolved":"/home/dwethmar/Projects/blocks/web/node_modules/ammo.js/ammo.js"},{"name":"../config","loc":{"line":5,"column":23},"parent":"/home/dwethmar/Projects/blocks/web/app/physics/physics.ts","resolved":"/home/dwethmar/Projects/blocks/web/app/config.ts"},{"name":"@blocks/core","loc":{"line":6,"column":21},"parent":"/home/dwethmar/Projects/blocks/web/app/physics/physics.ts","resolved":"/home/dwethmar/Projects/blocks/web/node_modules/@blocks/core/lib/core.js"}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var t=require(\"ammo.js\"),e=require(\"../config\"),o=require(\"@blocks/core\");exports.collisionConfiguration=new t.btDefaultCollisionConfiguration,exports.dispatcher=new t.btCollisionDispatcher(exports.collisionConfiguration),exports.overlappingPairCache=new t.btDbvtBroadphase,exports.solver=new t.btSequentialImpulseConstraintSolver,exports.dynamicsWorld=new t.btDiscreteDynamicsWorld(exports.dispatcher,exports.overlappingPairCache,exports.solver,exports.collisionConfiguration),exports.dynamicsWorld.setGravity(new t.btVector3(0,-10,0));var r=new t.btBoxShape(new t.btVector3(e.BLOCK_SIZE*e.CHUNK_SIZE,e.BLOCK_SIZE,e.BLOCK_SIZE*e.CHUNK_SIZE));exports.physicsObjects=[];var i=new t.btTransform;i.setIdentity(),i.setOrigin(new t.btVector3(0,0,0)),function(){var e=new t.btVector3(0,0,0);var o=new t.btDefaultMotionState(i),n=new t.btRigidBodyConstructionInfo(0,o,r,e),s=new t.btRigidBody(n);exports.dynamicsWorld.addRigidBody(s),exports.physicsObjects.push({body:s,transform:i})}();var n=function(){exports.dynamicsWorld.stepSimulation(1/60,10),exports.physicsObjects.forEach(function(t){t.body.getMotionState()&&(t.body.getMotionState().getWorldTransform(t.transform),t.gameObject&&(t.gameObject.position=o.createPoint(t.transform.getOrigin().x(),t.transform.getOrigin().z(),t.transform.getOrigin().y())))})};exports.default=n;"},"sourceMaps":{"js":{"mappings":[{"source":"app/physics/physics.ts","name":null,"original":{"line":84,"column":0},"generated":{"line":1,"column":0}},{"source":"app/physics/physics.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"app/physics/physics.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"app/physics/physics.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":33}},{"source":"app/physics/physics.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":35}},{"source":"app/physics/physics.ts","name":null,"original":{"line":2,"column":6},"generated":{"line":1,"column":39}},{"source":"app/physics/physics.ts","name":null,"original":{"line":2,"column":13},"generated":{"line":1,"column":41}},{"source":"app/physics/physics.ts","name":null,"original":{"line":2,"column":21},"generated":{"line":1,"column":49}},{"source":"app/physics/physics.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":60}},{"source":"app/physics/physics.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":62}},{"source":"app/physics/physics.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":70}},{"source":"app/physics/physics.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":83}},{"source":"app/physics/physics.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":85}},{"source":"app/physics/physics.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":93}},{"source":"app/physics/physics.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":109}},{"source":"app/physics/physics.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":117}},{"source":"app/physics/physics.ts","name":null,"original":{"line":9,"column":38},"generated":{"line":1,"column":140}},{"source":"app/physics/physics.ts","name":null,"original":{"line":9,"column":42},"generated":{"line":1,"column":144}},{"source":"app/physics/physics.ts","name":null,"original":{"line":9,"column":47},"generated":{"line":1,"column":146}},{"source":"app/physics/physics.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":178}},{"source":"app/physics/physics.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":186}},{"source":"app/physics/physics.ts","name":null,"original":{"line":10,"column":26},"generated":{"line":1,"column":197}},{"source":"app/physics/physics.ts","name":null,"original":{"line":10,"column":30},"generated":{"line":1,"column":201}},{"source":"app/physics/physics.ts","name":null,"original":{"line":10,"column":35},"generated":{"line":1,"column":203}},{"source":"app/physics/physics.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":225}},{"source":"app/physics/physics.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":233}},{"source":"app/physics/physics.ts","name":null,"original":{"line":13,"column":13},"generated":{"line":1,"column":257}},{"source":"app/physics/physics.ts","name":null,"original":{"line":13,"column":13},"generated":{"line":1,"column":265}},{"source":"app/physics/physics.ts","name":null,"original":{"line":13,"column":36},"generated":{"line":1,"column":286}},{"source":"app/physics/physics.ts","name":null,"original":{"line":13,"column":40},"generated":{"line":1,"column":290}},{"source":"app/physics/physics.ts","name":null,"original":{"line":13,"column":45},"generated":{"line":1,"column":292}},{"source":"app/physics/physics.ts","name":null,"original":{"line":14,"column":13},"generated":{"line":1,"column":309}},{"source":"app/physics/physics.ts","name":null,"original":{"line":14,"column":13},"generated":{"line":1,"column":317}},{"source":"app/physics/physics.ts","name":null,"original":{"line":14,"column":22},"generated":{"line":1,"column":324}},{"source":"app/physics/physics.ts","name":null,"original":{"line":14,"column":26},"generated":{"line":1,"column":328}},{"source":"app/physics/physics.ts","name":null,"original":{"line":14,"column":31},"generated":{"line":1,"column":330}},{"source":"app/physics/physics.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":1,"column":366}},{"source":"app/physics/physics.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":1,"column":374}},{"source":"app/physics/physics.ts","name":null,"original":{"line":15,"column":29},"generated":{"line":1,"column":388}},{"source":"app/physics/physics.ts","name":null,"original":{"line":15,"column":33},"generated":{"line":1,"column":392}},{"source":"app/physics/physics.ts","name":null,"original":{"line":15,"column":38},"generated":{"line":1,"column":394}},{"source":"app/physics/physics.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":1,"column":418}},{"source":"app/physics/physics.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":1,"column":426}},{"source":"app/physics/physics.ts","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":437}},{"source":"app/physics/physics.ts","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":445}},{"source":"app/physics/physics.ts","name":null,"original":{"line":18,"column":4},"generated":{"line":1,"column":466}},{"source":"app/physics/physics.ts","name":null,"original":{"line":18,"column":4},"generated":{"line":1,"column":474}},{"source":"app/physics/physics.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":481}},{"source":"app/physics/physics.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":489}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":513}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":521}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":14},"generated":{"line":1,"column":535}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":25},"generated":{"line":1,"column":546}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":29},"generated":{"line":1,"column":550}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":34},"generated":{"line":1,"column":552}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":44},"generated":{"line":1,"column":562}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":48},"generated":{"line":1,"column":565}},{"source":"app/physics/physics.ts","name":null,"original":{"line":21,"column":52},"generated":{"line":1,"column":568}},{"source":"app/physics/physics.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":572}},{"source":"app/physics/physics.ts","name":null,"original":{"line":23,"column":6},"generated":{"line":1,"column":576}},{"source":"app/physics/physics.ts","name":null,"original":{"line":23,"column":20},"generated":{"line":1,"column":578}},{"source":"app/physics/physics.ts","name":null,"original":{"line":23,"column":24},"generated":{"line":1,"column":582}},{"source":"app/physics/physics.ts","name":null,"original":{"line":23,"column":29},"generated":{"line":1,"column":584}},{"source":"app/physics/physics.ts","name":null,"original":{"line":24,"column":4},"generated":{"line":1,"column":595}},{"source":"app/physics/physics.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":599}},{"source":"app/physics/physics.ts","name":null,"original":{"line":24,"column":13},"generated":{"line":1,"column":601}},{"source":"app/physics/physics.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":611}},{"source":"app/physics/physics.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":613}},{"source":"app/physics/physics.ts","name":null,"original":{"line":25,"column":21},"generated":{"line":1,"column":624}},{"source":"app/physics/physics.ts","name":null,"original":{"line":25,"column":21},"generated":{"line":1,"column":626}},{"source":"app/physics/physics.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":637}},{"source":"app/physics/physics.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":639}},{"source":"app/physics/physics.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":650}},{"source":"app/physics/physics.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":652}},{"source":"app/physics/physics.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":1,"column":663}},{"source":"app/physics/physics.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":1,"column":665}},{"source":"app/physics/physics.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":678}},{"source":"app/physics/physics.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":686}},{"source":"app/physics/physics.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":701}},{"source":"app/physics/physics.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":704}},{"source":"app/physics/physics.ts","name":null,"original":{"line":35,"column":6},"generated":{"line":1,"column":708}},{"source":"app/physics/physics.ts","name":null,"original":{"line":35,"column":24},"generated":{"line":1,"column":710}},{"source":"app/physics/physics.ts","name":null,"original":{"line":35,"column":28},"generated":{"line":1,"column":714}},{"source":"app/physics/physics.ts","name":null,"original":{"line":35,"column":33},"generated":{"line":1,"column":716}},{"source":"app/physics/physics.ts","name":null,"original":{"line":37,"column":0},"generated":{"line":1,"column":728}},{"source":"app/physics/physics.ts","name":null,"original":{"line":37,"column":16},"generated":{"line":1,"column":730}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":1,"column":744}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":16},"generated":{"line":1,"column":746}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":756}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":30},"generated":{"line":1,"column":760}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":35},"generated":{"line":1,"column":762}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":45},"generated":{"line":1,"column":772}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":48},"generated":{"line":1,"column":774}},{"source":"app/physics/physics.ts","name":null,"original":{"line":38,"column":51},"generated":{"line":1,"column":776}},{"source":"app/physics/physics.ts","name":null,"original":{"line":41,"column":0},"generated":{"line":1,"column":780}},{"source":"app/physics/physics.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":791}},{"source":"app/physics/physics.ts","name":null,"original":{"line":44,"column":10},"generated":{"line":1,"column":795}},{"source":"app/physics/physics.ts","name":null,"original":{"line":44,"column":25},"generated":{"line":1,"column":797}},{"source":"app/physics/physics.ts","name":null,"original":{"line":44,"column":29},"generated":{"line":1,"column":801}},{"source":"app/physics/physics.ts","name":null,"original":{"line":44,"column":34},"generated":{"line":1,"column":803}},{"source":"app/physics/physics.ts","name":null,"original":{"line":44,"column":44},"generated":{"line":1,"column":813}},{"source":"app/physics/physics.ts","name":null,"original":{"line":44,"column":47},"generated":{"line":1,"column":815}},{"source":"app/physics/physics.ts","name":null,"original":{"line":44,"column":50},"generated":{"line":1,"column":817}},{"source":"app/physics/physics.ts","name":null,"original":{"line":50,"column":10},"generated":{"line":1,"column":820}},{"source":"app/physics/physics.ts","name":null,"original":{"line":50,"column":10},"generated":{"line":1,"column":824}},{"source":"app/physics/physics.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":826}},{"source":"app/physics/physics.ts","name":null,"original":{"line":50,"column":30},"generated":{"line":1,"column":830}},{"source":"app/physics/physics.ts","name":null,"original":{"line":50,"column":35},"generated":{"line":1,"column":832}},{"source":"app/physics/physics.ts","name":null,"original":{"line":50,"column":56},"generated":{"line":1,"column":853}},{"source":"app/physics/physics.ts","name":null,"original":{"line":51,"column":10},"generated":{"line":1,"column":856}},{"source":"app/physics/physics.ts","name":null,"original":{"line":51,"column":19},"generated":{"line":1,"column":858}},{"source":"app/physics/physics.ts","name":null,"original":{"line":51,"column":23},"generated":{"line":1,"column":862}},{"source":"app/physics/physics.ts","name":null,"original":{"line":51,"column":28},"generated":{"line":1,"column":864}},{"source":"app/physics/physics.ts","name":null,"original":{"line":42,"column":17},"generated":{"line":1,"column":892}},{"source":"app/physics/physics.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":894}},{"source":"app/physics/physics.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":896}},{"source":"app/physics/physics.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":898}},{"source":"app/physics/physics.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":1,"column":901}},{"source":"app/physics/physics.ts","name":null,"original":{"line":57,"column":17},"generated":{"line":1,"column":903}},{"source":"app/physics/physics.ts","name":null,"original":{"line":57,"column":21},"generated":{"line":1,"column":907}},{"source":"app/physics/physics.ts","name":null,"original":{"line":57,"column":26},"generated":{"line":1,"column":909}},{"source":"app/physics/physics.ts","name":null,"original":{"line":57,"column":38},"generated":{"line":1,"column":921}},{"source":"app/physics/physics.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":924}},{"source":"app/physics/physics.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":932}},{"source":"app/physics/physics.ts","name":null,"original":{"line":59,"column":18},"generated":{"line":1,"column":946}},{"source":"app/physics/physics.ts","name":null,"original":{"line":59,"column":31},"generated":{"line":1,"column":959}},{"source":"app/physics/physics.ts","name":null,"original":{"line":60,"column":4},"generated":{"line":1,"column":962}},{"source":"app/physics/physics.ts","name":null,"original":{"line":60,"column":4},"generated":{"line":1,"column":970}},{"source":"app/physics/physics.ts","name":null,"original":{"line":60,"column":19},"generated":{"line":1,"column":985}},{"source":"app/physics/physics.ts","name":null,"original":{"line":60,"column":24},"generated":{"line":1,"column":990}},{"source":"app/physics/physics.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":991}},{"source":"app/physics/physics.ts","name":null,"original":{"line":61,"column":14},"generated":{"line":1,"column":996}},{"source":"app/physics/physics.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":998}},{"source":"app/physics/physics.ts","name":null,"original":{"line":62,"column":19},"generated":{"line":1,"column":1008}},{"source":"app/physics/physics.ts","name":null,"original":{"line":41,"column":0},"generated":{"line":1,"column":1012}},{"source":"app/physics/physics.ts","name":null,"original":{"line":67,"column":0},"generated":{"line":1,"column":1015}},{"source":"app/physics/physics.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":1019}},{"source":"app/physics/physics.ts","name":null,"original":{"line":67,"column":22},"generated":{"line":1,"column":1021}},{"source":"app/physics/physics.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":1032}},{"source":"app/physics/physics.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":1040}},{"source":"app/physics/physics.ts","name":null,"original":{"line":68,"column":18},"generated":{"line":1,"column":1054}},{"source":"app/physics/physics.ts","name":null,"original":{"line":68,"column":33},"generated":{"line":1,"column":1069}},{"source":"app/physics/physics.ts","name":null,"original":{"line":68,"column":37},"generated":{"line":1,"column":1071}},{"source":"app/physics/physics.ts","name":null,"original":{"line":68,"column":41},"generated":{"line":1,"column":1074}},{"source":"app/physics/physics.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":1078}},{"source":"app/physics/physics.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":1086}},{"source":"app/physics/physics.ts","name":null,"original":{"line":69,"column":19},"generated":{"line":1,"column":1101}},{"source":"app/physics/physics.ts","name":null,"original":{"line":69,"column":27},"generated":{"line":1,"column":1109}},{"source":"app/physics/physics.ts","name":null,"original":{"line":69,"column":36},"generated":{"line":1,"column":1118}},{"source":"app/physics/physics.ts","name":null,"original":{"line":70,"column":12},"generated":{"line":1,"column":1121}},{"source":"app/physics/physics.ts","name":null,"original":{"line":70,"column":17},"generated":{"line":1,"column":1123}},{"source":"app/physics/physics.ts","name":null,"original":{"line":70,"column":22},"generated":{"line":1,"column":1128}},{"source":"app/physics/physics.ts","name":null,"original":{"line":71,"column":12},"generated":{"line":1,"column":1147}},{"source":"app/physics/physics.ts","name":null,"original":{"line":71,"column":17},"generated":{"line":1,"column":1149}},{"source":"app/physics/physics.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":1,"column":1154}},{"source":"app/physics/physics.ts","name":null,"original":{"line":71,"column":39},"generated":{"line":1,"column":1171}},{"source":"app/physics/physics.ts","name":null,"original":{"line":71,"column":57},"generated":{"line":1,"column":1189}},{"source":"app/physics/physics.ts","name":null,"original":{"line":71,"column":62},"generated":{"line":1,"column":1191}},{"source":"app/physics/physics.ts","name":null,"original":{"line":73,"column":16},"generated":{"line":1,"column":1202}},{"source":"app/physics/physics.ts","name":null,"original":{"line":73,"column":21},"generated":{"line":1,"column":1204}},{"source":"app/physics/physics.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":1217}},{"source":"app/physics/physics.ts","name":null,"original":{"line":74,"column":21},"generated":{"line":1,"column":1219}},{"source":"app/physics/physics.ts","name":null,"original":{"line":74,"column":32},"generated":{"line":1,"column":1230}},{"source":"app/physics/physics.ts","name":null,"original":{"line":74,"column":43},"generated":{"line":1,"column":1239}},{"source":"app/physics/physics.ts","name":null,"original":{"line":74,"column":43},"generated":{"line":1,"column":1241}},{"source":"app/physics/physics.ts","name":null,"original":{"line":75,"column":20},"generated":{"line":1,"column":1253}},{"source":"app/physics/physics.ts","name":null,"original":{"line":75,"column":25},"generated":{"line":1,"column":1255}},{"source":"app/physics/physics.ts","name":null,"original":{"line":75,"column":35},"generated":{"line":1,"column":1265}},{"source":"app/physics/physics.ts","name":null,"original":{"line":75,"column":47},"generated":{"line":1,"column":1277}},{"source":"app/physics/physics.ts","name":null,"original":{"line":76,"column":20},"generated":{"line":1,"column":1281}},{"source":"app/physics/physics.ts","name":null,"original":{"line":76,"column":25},"generated":{"line":1,"column":1283}},{"source":"app/physics/physics.ts","name":null,"original":{"line":76,"column":35},"generated":{"line":1,"column":1293}},{"source":"app/physics/physics.ts","name":null,"original":{"line":76,"column":47},"generated":{"line":1,"column":1305}},{"source":"app/physics/physics.ts","name":null,"original":{"line":77,"column":20},"generated":{"line":1,"column":1309}},{"source":"app/physics/physics.ts","name":null,"original":{"line":77,"column":25},"generated":{"line":1,"column":1311}},{"source":"app/physics/physics.ts","name":null,"original":{"line":77,"column":35},"generated":{"line":1,"column":1321}},{"source":"app/physics/physics.ts","name":null,"original":{"line":77,"column":47},"generated":{"line":1,"column":1333}},{"source":"app/physics/physics.ts","name":null,"original":{"line":84,"column":0},"generated":{"line":1,"column":1343}},{"source":"app/physics/physics.ts","name":null,"original":{"line":84,"column":0},"generated":{"line":1,"column":1351}},{"source":"app/physics/physics.ts","name":null,"original":{"line":84,"column":15},"generated":{"line":1,"column":1359}}],"sources":{"app/physics/physics.ts":"// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst Ammo = require('ammo.js');\n\nimport { BLOCK_SIZE, CHUNK_SIZE } from '../config';\nimport { GameObject, createPoint } from '@blocks/core';\n\n// https://github.com/kripken/ammo.js/blob/master/examples/hello_world.js\n// physics\nexport const collisionConfiguration = new Ammo.btDefaultCollisionConfiguration();\nexport const dispatcher = new Ammo.btCollisionDispatcher(\n    collisionConfiguration,\n);\nexport const overlappingPairCache = new Ammo.btDbvtBroadphase();\nexport const solver = new Ammo.btSequentialImpulseConstraintSolver();\nexport const dynamicsWorld = new Ammo.btDiscreteDynamicsWorld(\n    dispatcher,\n    overlappingPairCache,\n    solver,\n    collisionConfiguration,\n);\ndynamicsWorld.setGravity(new Ammo.btVector3(0, -10, 0));\n\nconst groundShape = new Ammo.btBoxShape(\n    new Ammo.btVector3(\n        BLOCK_SIZE * CHUNK_SIZE,\n        BLOCK_SIZE,\n        BLOCK_SIZE * CHUNK_SIZE,\n    ),\n);\nexport const physicsObjects: {\n    transform?: any;\n    body: any;\n    gameObject?: GameObject;\n}[] = [];\nconst groundTransform = new Ammo.btTransform();\n\ngroundTransform.setIdentity();\ngroundTransform.setOrigin(new Ammo.btVector3(0, 0, 0));\n\n// Make ground\n(function() {\n    const mass = 0;\n    const isDynamic = mass !== 0;\n    const localInertia = new Ammo.btVector3(0, 0, 0);\n\n    if (isDynamic) {\n        groundShape.calculateLocalInertia(mass, localInertia);\n    }\n\n    const myMotionState = new Ammo.btDefaultMotionState(groundTransform);\n    const rbInfo = new Ammo.btRigidBodyConstructionInfo(\n        mass,\n        myMotionState,\n        groundShape,\n        localInertia,\n    );\n    const body = new Ammo.btRigidBody(rbInfo);\n\n    dynamicsWorld.addRigidBody(body);\n    physicsObjects.push({\n        body: body,\n        transform: groundTransform,\n    });\n})();\n// physics\n\nconst updatePhysics = (): void => {\n    dynamicsWorld.stepSimulation(1 / 60, 10);\n    physicsObjects.forEach(function(body) {\n        if (body.body.getMotionState()) {\n            body.body.getMotionState().getWorldTransform(body.transform);\n\n            if (body.gameObject) {\n                body.gameObject.position = createPoint(\n                    body.transform.getOrigin().x(),\n                    body.transform.getOrigin().z(),\n                    body.transform.getOrigin().y(),\n                );\n            }\n        }\n    });\n};\n\nexport default updatePhysics;\n"},"lineCount":null}},"error":null,"hash":"c04c02dd1943fbebcbde453d06c9a72a","cacheData":{"env":{}}}