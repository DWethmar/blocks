{"id":"IhRa","dependencies":[{"name":"/home/dwethmar/Projects/blocks/web/tsconfig.json","includedInParent":true,"mtime":1558787104633},{"name":"/home/dwethmar/Projects/blocks/web/.babelrc","includedInParent":true,"mtime":1558107217825},{"name":"/home/dwethmar/Projects/blocks/web/package.json","includedInParent":true,"mtime":1558785188756},{"name":"../../physics/physics","loc":{"line":3,"column":24},"parent":"/home/dwethmar/Projects/blocks/web/app/ball/components/ball-physics.ts","resolved":"/home/dwethmar/Projects/blocks/web/app/physics/physics.ts"},{"name":"ammo.js","loc":{"line":5,"column":19},"parent":"/home/dwethmar/Projects/blocks/web/app/ball/components/ball-physics.ts","resolved":"/home/dwethmar/Projects/blocks/web/node_modules/ammo.js/ammo.js"}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var t=require(\"../../physics/physics\"),s=require(\"ammo.js\");function e(e,i){if(!i.physics.trans){i.physics.trans=new s.btTransform;var n=new s.btSphereShape(5),o=new s.btTransform;o.setIdentity();var r=new s.btVector3(0,0,0);n.calculateLocalInertia(1,r),o.setOrigin(new s.btVector3(i.position.x,i.position.z,i.position.y));var a=new s.btDefaultMotionState(o),c=new s.btRigidBodyConstructionInfo(1,a,n,r),p=new s.btRigidBody(c);t.dynamicsWorld.addRigidBody(p),t.physicsObjects.push({body:p,transform:i.physics.trans,gameObject:i})}}exports.ballPhysics=e;"},"sourceMaps":{"js":{"mappings":[{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":0}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":13}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":21}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":33}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":35}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":39}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":41}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":49}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":8,"column":6},"generated":{"line":1,"column":74}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":8,"column":13},"generated":{"line":1,"column":76}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":8,"column":21},"generated":{"line":1,"column":84}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":95}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":16},"generated":{"line":1,"column":104}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":28},"generated":{"line":1,"column":106}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":42},"generated":{"line":1,"column":108}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":1,"column":111}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":115}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":1,"column":117}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":11,"column":22},"generated":{"line":1,"column":125}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":11,"column":29},"generated":{"line":1,"column":131}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":12,"column":8},"generated":{"line":1,"column":132}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":12,"column":13},"generated":{"line":1,"column":134}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":12,"column":21},"generated":{"line":1,"column":142}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":12,"column":29},"generated":{"line":1,"column":148}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":12,"column":33},"generated":{"line":1,"column":152}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":12,"column":38},"generated":{"line":1,"column":154}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":1,"column":166}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":1,"column":170}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":14,"column":25},"generated":{"line":1,"column":172}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":14,"column":29},"generated":{"line":1,"column":176}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":14,"column":34},"generated":{"line":1,"column":178}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":14,"column":48},"generated":{"line":1,"column":192}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":15,"column":14},"generated":{"line":1,"column":195}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":15,"column":31},"generated":{"line":1,"column":197}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":15,"column":35},"generated":{"line":1,"column":201}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":15,"column":40},"generated":{"line":1,"column":203}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":215}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":17,"column":23},"generated":{"line":1,"column":217}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":19,"column":14},"generated":{"line":1,"column":231}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":21,"column":14},"generated":{"line":1,"column":235}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":21,"column":29},"generated":{"line":1,"column":237}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":21,"column":33},"generated":{"line":1,"column":241}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":21,"column":38},"generated":{"line":1,"column":243}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":21,"column":48},"generated":{"line":1,"column":253}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":21,"column":51},"generated":{"line":1,"column":255}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":21,"column":54},"generated":{"line":1,"column":257}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":24,"column":12},"generated":{"line":1,"column":260}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":24,"column":21},"generated":{"line":1,"column":262}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":19,"column":21},"generated":{"line":1,"column":284}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":24,"column":49},"generated":{"line":1,"column":286}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":289}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":27,"column":23},"generated":{"line":1,"column":291}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":28,"column":12},"generated":{"line":1,"column":301}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":28,"column":16},"generated":{"line":1,"column":305}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":1,"column":307}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":29,"column":16},"generated":{"line":1,"column":317}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":29,"column":21},"generated":{"line":1,"column":319}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":29,"column":30},"generated":{"line":1,"column":328}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":30,"column":16},"generated":{"line":1,"column":330}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":30,"column":21},"generated":{"line":1,"column":332}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":1,"column":341}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":343}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":31,"column":21},"generated":{"line":1,"column":345}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":31,"column":30},"generated":{"line":1,"column":354}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":35,"column":14},"generated":{"line":1,"column":358}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":35,"column":14},"generated":{"line":1,"column":362}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":35,"column":30},"generated":{"line":1,"column":364}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":35,"column":34},"generated":{"line":1,"column":368}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":35,"column":39},"generated":{"line":1,"column":370}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":35,"column":60},"generated":{"line":1,"column":391}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":36,"column":14},"generated":{"line":1,"column":394}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":36,"column":23},"generated":{"line":1,"column":396}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":36,"column":27},"generated":{"line":1,"column":400}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":36,"column":32},"generated":{"line":1,"column":402}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":19,"column":21},"generated":{"line":1,"column":430}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":38,"column":12},"generated":{"line":1,"column":432}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":434}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":40,"column":12},"generated":{"line":1,"column":436}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":42,"column":14},"generated":{"line":1,"column":439}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":42,"column":21},"generated":{"line":1,"column":441}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":42,"column":25},"generated":{"line":1,"column":445}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":42,"column":30},"generated":{"line":1,"column":447}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":42,"column":42},"generated":{"line":1,"column":459}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":462}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":464}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":43,"column":22},"generated":{"line":1,"column":478}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":43,"column":35},"generated":{"line":1,"column":491}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":494}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":496}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":44,"column":23},"generated":{"line":1,"column":511}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":44,"column":28},"generated":{"line":1,"column":516}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":45,"column":12},"generated":{"line":1,"column":517}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":45,"column":18},"generated":{"line":1,"column":522}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":46,"column":12},"generated":{"line":1,"column":524}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":46,"column":23},"generated":{"line":1,"column":534}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":46,"column":28},"generated":{"line":1,"column":536}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":46,"column":36},"generated":{"line":1,"column":544}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":550}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":47,"column":24},"generated":{"line":1,"column":561}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":566}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":574}},{"source":"app/ball/components/ball-physics.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":586}}],"sources":{"app/ball/components/ball-physics.ts":"import * as PIXI from 'pixi.js';\n\nimport { Scene } from '@blocks/core';\nimport { dynamicsWorld, physicsObjects } from '../../physics/physics';\nimport { Ball } from '../ball';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst Ammo = require('ammo.js');\n\nexport function ballPhysics(scene: Scene, ball: Ball): void {\n    if (!ball.physics.trans) {\n        ball.physics.trans = new Ammo.btTransform(); // taking this out of the loop below us reduces the leaking\n\n        const colShape = new Ammo.btSphereShape(5);\n        const startTransform = new Ammo.btTransform();\n\n        startTransform.setIdentity();\n\n        const mass = 1;\n        const isDynamic = true; // mass !== 0;\n        const localInertia = new Ammo.btVector3(0, 0, 0);\n\n        if (isDynamic) {\n            colShape.calculateLocalInertia(mass, localInertia);\n        }\n\n        startTransform.setOrigin(\n            new Ammo.btVector3(\n                ball.position.x,\n                ball.position.z,\n                ball.position.y,\n            ),\n        );\n\n        const myMotionState = new Ammo.btDefaultMotionState(startTransform);\n        const rbInfo = new Ammo.btRigidBodyConstructionInfo(\n            mass,\n            myMotionState,\n            colShape,\n            localInertia,\n        );\n        const body = new Ammo.btRigidBody(rbInfo);\n        dynamicsWorld.addRigidBody(body);\n        physicsObjects.push({\n            body: body,\n            transform: ball.physics.trans,\n            gameObject: ball,\n        });\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"99b958579cc6f2989ee6956e06fca782","cacheData":{"env":{}}}